{
  "openapi" : "3.0.0",
  "servers" : [ {
    "description" : "SwaggerHub API Auto Mocking",
    "url" : "https://virtserver.swaggerhub.com/estevebadia/komunitin-api/1.0.0"
  } ],
  "info" : {
    "version" : "1.0.0",
    "title" : "Komunitin Social API",
    "description" : "API for interacting with the social aspect of Komunitin system.\n\n**This is still a work in progress**. Comments welcomed at komunitinbox@gmail.com or at [GitHub](https://github.com/komunitin/komunitin-api).\n\nThis API provides access to exchange group details, member details and their offers and needs and also informational message broadcasting. It doesn't feature payments nor any finantial information, as this is available in a separate API. Subscrption to notifications (email and push) and notification preferences are also defined in a separate API.\n## Preliminaries\n- This spec is based on the [JSON:API](https://jsonapi.org) standard.\n## Authorization\n\n Authorization endpoints are out of the scope of this API, which expects the user to be authorized with a JWT access token. The access token is provided by a separate authorization API. The recommended OAuth2 flow for web apps and native apps is the Authorization Code Flow with Proof Key for Code Exchange (PKCE).\n\n## Architecture\n \n - The URL structure starts with the exchange 4-letter code, so it eases the isolation among different exchange groups in a single server. The only exception is the global `exchanges/` endpoint.\n - All resources have a global UUID identifier as their `id` field, but the URLs are human-readable. The URLs are meant to be almost immutable to allow caching and others, but can occasinally change (for example, in case of server migration), while the UUIDs are really immutable.\n \n ## Data privacy\n \n Access to resources (Exchanges, Members, Offers, Needs, Messages) may be restricted bay assigning one of the predefined access levels to the `access` resource field.\n  - `private`: The resource is only accessible by its owner.\n  - `exchange`: The resource is only accessible by the members of the same exchange group.\n  - `public`: The resource is publicly accessible on the internet.\nOther access levels may be added in the future.\n  "
  },
  "security" : [ {
    "accessCode" : [ ]
  } ],
  "paths" : {
    "/exchanges" : {
      "get" : {
        "summary" : "Get the exchanges collection",
        "description" : "Return the collection of active exchanges registered in this server.",
        "responses" : {
          "200" : {
            "description" : "OK"
          }
        }
      },
      "post" : {
        "summary" : "Create a new exchange",
        "description" : "Create a new exchange group. The exchange group may not be immediately available, but wait for administration approval.",
        "responses" : {
          "201" : {
            "description" : "Created"
          }
        }
      }
    },
    "/{exchangeCode}" : {
      "get" : {
        "summary" : "Get the exchange details",
        "description" : "Return the exchange object and links to the related collections.",
        "parameters" : [ {
          "name" : "exchangeCode",
          "description" : "4-letter identifier of the exchange",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "security" : [ ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Exchange"
                },
                "examples" : {
                  "example-exchange" : {
                    "$ref" : "#/components/examples/example-exchange"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components" : {
    "schemas" : {
      "Exchange" : {
        "type" : "object",
        "properties" : {
          "data" : {
            "type" : "object",
            "properties" : {
              "id" : {
                "type" : "string"
              },
              "type" : {
                "type" : "string"
              },
              "attributes" : {
                "type" : "object",
                "properties" : {
                  "name" : {
                    "type" : "string"
                  }
                }
              },
              "relationships" : {
                "type" : "object",
                "properties" : {
                  "accounts" : {
                    "type" : "object",
                    "properties" : {
                      "links" : {
                        "type" : "object",
                        "properties" : {
                          "related" : {
                            "type" : "string",
                            "format" : "url"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "securitySchemes" : {
      "accessCode" : {
        "type" : "oauth2",
        "flows" : {
          "authorizationCode" : {
            "authorizationUrl" : "http://example.com/oauth/auth",
            "tokenUrl" : "http://example.com/oauth/token",
            "scopes" : { }
          }
        }
      }
    },
    "examples" : {
      "example-member" : {
        "$ref" : "https://github.com/komunitin/komunitin-api/blob/master/doc/examples/member.json"
      },
      "example-exchange" : {
        "$ref" : "https://github.com/komunitin/komunitin-api/blob/master/doc/examples/exchange.json"
      }
    }
  }
}